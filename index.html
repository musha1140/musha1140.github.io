<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gas-Lighting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; min-height: 100vh; background: #050505; display: flex; justify-content: center; align-items: center; flex-direction: column; color: #00e676; font-family: 'Courier New', Courier, monospace; overflow-x: hidden; }
        #gameboard { margin: 20px 0; width: 95vw; max-width: 600px; aspect-ratio: 1; background-color: #020202; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; border: 1px solid #111; box-shadow: 0 0 30px rgba(0, 230, 118, 0.05); }
        
        textarea { background-color: rgba(0,255,118,0.02); color: #00e676; border: 1px solid #1a1a1a; padding: 1rem; width: 100%; font-family: 'Courier New', monospace; transition: all 0.3s; resize: none; outline: none; }
        textarea:focus { border-color: #00e676; background-color: rgba(0,255,118,0.05); box-shadow: 0 0 10px rgba(0, 230, 118, 0.1); }
        textarea::placeholder { color: #1a4d2e; }
        
        .btn-custom { border: 1px solid #1a1a1a; background-color: #0a0a0a; color: #555; text-transform: uppercase; letter-spacing: 2px; transition: all 0.2s ease-out; font-weight: bold; cursor: pointer; }
        .btn-custom:hover:not(:disabled) { background-color: #00e676; color: #000; border-color: #00e676; box-shadow: 0 0 15px rgba(0, 230, 118, 0.3); }
        .btn-custom:disabled { opacity: 0.2; cursor: not-allowed; }
        
        .btn-decrypt { border-color: #b71c1c; color: #b71c1c; }
        .btn-decrypt:hover:not(:disabled) { background-color: #b71c1c; color: #fff; border-color: #ff5252; box-shadow: 0 0 15px rgba(183, 28, 28, 0.5); }

        .btn-download { border-color: #0284c7; color: #0284c7; }
        .btn-download:hover:not(:disabled) { background-color: #0284c7; color: #fff; border-color: #38bdf8; box-shadow: 0 0 15px rgba(2, 132, 199, 0.5); }

        select { background-color: #050505; color: #00e676; border: 1px solid #1a1a1a; padding: 0.75rem; width: 100%; outline: none; font-family: monospace; cursor: pointer; appearance: none; text-align: center; }
        select:hover { border-color: #333; }

        #dropArea { border: 1px dashed #1a1a1a; transition: all 0.3s; }
        #dropArea:hover { border-color: #00e676; background-color: rgba(0,255,118,0.02); }

        .hidden { display: none !important; }
        .terminal-header { letter-spacing: 4px; border-bottom: 1px solid #111; padding-bottom: 10px; margin-bottom: 10px; width: 100%; text-align: center; }
    </style>
</head>
<body class="p-6 relative">

    <div class="w-full max-w-2xl flex flex-col items-center gap-2">
        <h2 class="text-xl font-bold text-gray-500 terminal-header">
            [ GAS-LIGHTING <span class="text-green-500">PROTOCOL</span> ]
        </h2>
        
        <div class="w-full flex justify-between items-center text-[10px] tracking-widest text-gray-600 px-2">
            <span id="status" class="text-green-700 font-bold">SYSTEM READY</span>
            <span id="cipherHash">SIG: NONE</span>
        </div>

        <div id="gameboard"></div>

        <div class="w-full flex flex-col gap-4">
            <div id="inputSection">
                <textarea id="typingInput" rows="2" placeholder="> INJECT_PAYLOAD..."></textarea>
            </div>
            <div id="outputSection" class="hidden">
                <textarea id="decryptedOutput" rows="2" readonly placeholder="> AWAITING ACOUSTIC REVEAL..."></textarea>
            </div>
            
            <div class="flex gap-4 w-full h-14">
                <select id="songNumber" class="flex-1 text-xs">
                    <option value="">[ SELECT HARMONIC KEY ]</option>
                    <option value="1">Titanic Theme</option>
                    <option value="2">American Pie</option>
                    <option value="3">Hypnotize</option>
                    <option value="4">Lost In Hollywood</option>
                    <option value="5">Holding Out For A Hero</option>
                    <option value="6">Severance Theme</option>
                    <option value="7">Bury a Friend</option>
                    <option value="8">Good Riddance</option>
                    <option value="9">Tetris Theme</option>
                    <option value="10">Westworld Theme</option>
                    <option value="11">Interstellar Theme</option>
                    <option value="12">Happy Violence</option>
                    <option value="13">Dancing Queen</option>
                    <option value="14">Death Note</option>
                    <option value="15">Bohemian Rhapsody</option>
                    <option value="16">Only Time</option>
                </select>

                <div id="dropArea" class="flex-1 rounded flex items-center justify-center cursor-pointer relative">
                    <p id="dropText" class="text-gray-600 text-[10px] tracking-widest text-center">
                        DROP .SLAYY FILE HERE
                    </p>
                    <input type="file" id="fileInput" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" accept=".slayy" />
                </div>
            </div>

            <button id="encryptButton" class="btn-custom w-full py-4 text-xs" disabled>INITIATE CONSTRUCT SEQUENCE</button>
            <button id="downloadBtn" class="hidden btn-custom btn-download w-full py-4 text-xs">DOWNLOAD .SLAYY FILE</button>
            <button id="decryptButton" class="hidden btn-custom btn-decrypt w-full py-4 text-xs">TRIGGER ACOUSTIC REVEAL</button>
        </div>
    </div>

    <script src="https://unpkg.com/tone@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <script>
const _0x269545=_0x34c5;(function(_0x4de13b,_0x37cabf){const _0x569e6e=_0x34c5,_0x5f218f=_0x4de13b();while(!![]){try{const _0x55256b=-parseInt(_0x569e6e(0x1c5))/0x1*(parseInt(_0x569e6e(0x1a1))/0x2)+parseInt(_0x569e6e(0x181))/0x3*(-parseInt(_0x569e6e(0x1ea))/0x4)+-parseInt(_0x569e6e(0x149))/0x5+parseInt(_0x569e6e(0x1c0))/0x6*(parseInt(_0x569e6e(0x17e))/0x7)+parseInt(_0x569e6e(0x142))/0x8+parseInt(_0x569e6e(0x1ab))/0x9+parseInt(_0x569e6e(0x184))/0xa;if(_0x55256b===_0x37cabf)break;else _0x5f218f['push'](_0x5f218f['shift']());}catch(_0x2849a8){_0x5f218f['push'](_0x5f218f['shift']());}}}(_0x1822,0x2b854));const midiFiles=[_0x269545(0x13c),_0x269545(0x1e6),_0x269545(0x17b),_0x269545(0x174),_0x269545(0x164),_0x269545(0x196),_0x269545(0x1a6),_0x269545(0x18b),_0x269545(0x16d),_0x269545(0x1e0),_0x269545(0x144),_0x269545(0x15b),_0x269545(0x1b6),'https://irp.cdn-website.com/cee417da/audio/Death_Note_-_L-s_Theme.mid',_0x269545(0x13e),_0x269545(0x14a)];let currentMidiBuffer=null,masterAudioKey=null,qrSize=0x1d,targetQR=null,globalProgress=0x0,globalMode='idle',syncInterval=null,particles=[],myP5=null,globalBeatPulse=0x0,globalNoiseTime=0x0,incomingPayload=null,decryptedMessage='',meter,synth,isAudioInit=![],pendingSlayyBlob=null,pendingSlayyFilename='';async function initAudio(){const _0x30e575=_0x269545;if(isAudioInit)return;await Tone[_0x30e575(0x19a)](),meter=new Tone[(_0x30e575(0x177))](),synth=new Tone['PolySynth'](Tone[_0x30e575(0x157)],{'maxPolyphony':0x20})[_0x30e575(0x15e)](meter)[_0x30e575(0x1a9)](),isAudioInit=!![];}window[_0x269545(0x1de)](_0x269545(0x178),()=>{const _0x53710f=_0x269545,_0x394113=new URLSearchParams(window[_0x53710f(0x191)][_0x53710f(0x167)]),_0x3e5ef9=_0x394113['get'](_0x53710f(0x1aa)),_0x453575=_0x394113['get'](_0x53710f(0x16e));_0x3e5ef9&&_0x453575&&(incomingPayload=decodeURIComponent(_0x3e5ef9),document[_0x53710f(0x19f)](_0x53710f(0x1a4))['classList'][_0x53710f(0x1b7)](_0x53710f(0x151)),document[_0x53710f(0x19f)](_0x53710f(0x14c))['classList'][_0x53710f(0x175)](_0x53710f(0x151)),document[_0x53710f(0x19f)](_0x53710f(0x1cb))[_0x53710f(0x193)][_0x53710f(0x1b7)](_0x53710f(0x151)),document[_0x53710f(0x19f)](_0x53710f(0x1e5))[_0x53710f(0x193)][_0x53710f(0x175)](_0x53710f(0x151)),document[_0x53710f(0x19f)](_0x53710f(0x1d9))[_0x53710f(0x1d3)]=_0x53710f(0x171),document[_0x53710f(0x19f)](_0x53710f(0x13b))[_0x53710f(0x1d3)]=_0x53710f(0x185),document['getElementById'](_0x53710f(0x1b9))[_0x53710f(0x1b4)]=_0x453575,document[_0x53710f(0x19f)](_0x53710f(0x1b9))[_0x53710f(0x1a3)](new Event(_0x53710f(0x154))));});function _0x1822(){const _0x125a9e=['target','mode','https://irp.cdn-website.com/cee417da/audio/Dada_Life_-_Happy_Violence.mid','name','onload','connect','files','readAsText','fileInput','activationProgress','stroke','https://irp.cdn-website.com/cee417da/audio/Holding-Out-For-A-Hero-1.mid','reveal','getModuleCount','search','replace','ENTER\x20PAYLOAD','/?payload=','make','application/octet-stream','https://irp.cdn-website.com/cee417da/audio/Tetris_-_A_Theme.mid','key','Empty\x20Payload','updateAndDraw','QR\x20SIGNAL\x20DETECTED','noise','parent','https://irp.cdn-website.com/cee417da/audio/LostInHollywood.mid','remove','substring','Meter','DOMContentLoaded','TRANSMISSION\x20LOCKED','atan2','https://irp.cdn-website.com/cee417da/audio/Hypnotize_%282%29.mid','length','ACOUSTIC\x20SYNC:\x20ACTIVE','1285151RSGcDU','Transport','https://','3gaiBRg','targetC','Utf8','953960oskhfE','EXTERNAL\x20SCAN\x20LINKED','push','fill','random','rectMode','.slayy','https://irp.cdn-website.com/cee417da/audio/GoodRiddance%28TimeOfYourLife%29%283%29.mid','active','origin','text-yellow-500','010101^&|!@#$%*()_+~`={}:<>?','constrain','location','parse','classList','style','text-green-700','https://irp.cdn-website.com/cee417da/audio/Severance_theme.mid','strokeWeight','dragover','download','start','map','result','endsWith','#00e676','getElementById','lerp','6108CAQPYP','isData','dispatchEvent','inputSection','velocity','https://irp.cdn-website.com/cee417da/audio/Billie_Eilish_-_bury_a_friend_%28WIP%29.mid','borderColor','done','toDestination','payload','2823678cTcpjm','setup','preventDefault','rect','cipherHash','createCanvas','sin','WORD','floor','value','notes','https://irp.cdn-website.com/cee417da/audio/DancingQueen_(1).mid','add','targetR','songNumber','createElement','PROPRIETARY\x20FORMAT\x20VERIFIED','text','LOCKED\x20PAYLOAD\x20DETECTED','arrayBuffer','CIPHER_','6zzqnNW','2.0','decrypt','drop','midi','11szPBUh','channel','forEach','textAlign','DECRYPTION\x20COMPLETE','CENTER','encryptButton','noStroke','noFill','addData','getValue','FETCHING\x20HARMONIC\x20KEY...','toString','triggerAttackRelease','innerText','dragleave','Draw','#1a1a1a','gameboard','AES','status','disabled','href','downloadBtn','duration','addEventListener','?payload=','https://irp.cdn-website.com/cee417da/audio/Ramin_Djawadi_-_Westworld_Theme.mid','DECRYPTION\x20FAILED.\x20KEY\x20MISMATCH.','draw','click','height','decryptButton','https://irp.cdn-website.com/cee417da/audio/Don_McLean_-_American_Pie.mid','SIG:\x20','HARMONIC\x20KEY\x20ALIGNED','ERROR:\x20CORRUPTED\x20OR\x20INVALID\x20.SLAYY\x20FORMAT.','763700SNlvAf','time','dropText','https://irp.cdn-website.com/cee417da/audio/My-Heart-Will-Go-On-%28From--Titanic-%29.mid','min','https://irp.cdn-website.com/cee417da/audio/Bohemian-Rhapsody-1.mid','decryptedOutput','opacity','&key=','765824RhYjiu','textWrap','https://irp.cdn-website.com/cee417da/audio/CornChaseIntersteller.mid','construct','max','tracks','width','1428400dFqvVa','https://irp.cdn-website.com/cee417da/audio/OnlyTime.mid','context','outputSection','ellipse','frameCount','typingInput','cos','hidden','TWO_PI','enc','change','createObjectURL','schedule','Synth','pow'];_0x1822=function(){return _0x125a9e;};return _0x1822();}class DataParticle{constructor(_0x3bf924,_0x5262d7,_0x5c653f,_0x4f4b65,_0x28afe7,_0x30aa5e,_0x12e6d2){const _0x355390=_0x269545;this['p']=_0x3bf924,this[_0x355390(0x1a2)]=_0x4f4b65,this[_0x355390(0x162)]=_0x28afe7,this[_0x355390(0x15a)]=_0x12e6d2,this[_0x355390(0x1b8)]=_0x5262d7,this[_0x355390(0x182)]=_0x5c653f,this[_0x355390(0x18c)]=![],this[_0x355390(0x140)]=0xb4;let _0x3e111d=_0x3bf924[_0x355390(0x148)]/qrSize,_0x323107=_0x5c653f*_0x3e111d+_0x3e111d/0x2,_0x4fa2df=_0x5262d7*_0x3e111d+_0x3e111d/0x2;if(_0x12e6d2===_0x355390(0x145)){this['x']=_0x3bf924[_0x355390(0x148)]/0x2,this['y']=_0x3bf924['height']/0x2;let _0x159954=_0x3bf924['random'](_0x3bf924[_0x355390(0x152)]),_0x29261c=_0x3bf924['map'](_0x30aa5e,0x0,0x1,0x2,0xc);this['vx']=_0x3bf924[_0x355390(0x150)](_0x159954)*_0x29261c,this['vy']=_0x3bf924['sin'](_0x159954)*_0x29261c;}else{if(_0x12e6d2===_0x355390(0x165)){this['x']=_0x323107,this['y']=_0x4fa2df;let _0x5e15c3=_0x3bf924[_0x355390(0x17a)](this['y']-_0x3bf924[_0x355390(0x1e4)]/0x2,this['x']-_0x3bf924[_0x355390(0x148)]/0x2)+_0x3bf924[_0x355390(0x188)](-0.5,0.5);this['vx']=_0x3bf924[_0x355390(0x150)](_0x5e15c3),this['vy']=_0x3bf924[_0x355390(0x1b1)](_0x5e15c3);}}}[_0x269545(0x170)](_0x4c4011,_0x3f5b9c,_0x579e46,_0x1c6799){const _0x53f128=_0x269545;let _0x4db0c5=this[_0x53f128(0x182)]*_0x3f5b9c+_0x3f5b9c/0x2,_0x20339c=this[_0x53f128(0x1b8)]*_0x3f5b9c+_0x3f5b9c/0x2;if(this['mode']===_0x53f128(0x145)){if(_0x579e46){this['p'][_0x53f128(0x187)](this[_0x53f128(0x1a2)]?[0x0,0xe6,0x76]:[0xb7,0x1c,0x1c]),this['p'][_0x53f128(0x1ae)](_0x4db0c5,_0x20339c,_0x3f5b9c,_0x3f5b9c);return;}if(_0x4c4011>=this['activationProgress'])this[_0x53f128(0x18c)]=!![];if(!this[_0x53f128(0x18c)])return;let _0x1b7eb2=this['p'][_0x53f128(0x190)](this['p'][_0x53f128(0x19b)](_0x4c4011,this['activationProgress'],0.85,0x0,0x1),0x0,0x1),_0x167d14=0.005,_0x50a405=this['p']['noise'](this['x']*_0x167d14,this['y']*_0x167d14,globalNoiseTime)*this['p'][_0x53f128(0x152)]*0x4,_0x1e0a04=this['p'][_0x53f128(0x17a)](_0x20339c-this['y'],_0x4db0c5-this['x']),_0x241232=this['p'][_0x53f128(0x1a0)](_0x50a405,_0x1e0a04,_0x1c6799),_0x5949f3=_0x1c6799*0x8;this['vx']+=this['p']['cos'](_0x241232)*(0.5+_0x5949f3),this['vy']+=this['p']['sin'](_0x241232)*(0.5+_0x5949f3),this['vx']*=0.8,this['vy']*=0.8;let _0x5b106a=this['p'][_0x53f128(0x158)](_0x1b7eb2,0x3),_0x57bf0b=this['p'][_0x53f128(0x190)](_0x5b106a+_0x1c6799*0.4,0x0,0x1);this['x']=this['p'][_0x53f128(0x1a0)](this['x']+this['vx'],_0x4db0c5,_0x57bf0b),this['y']=this['p'][_0x53f128(0x1a0)](this['y']+this['vy'],_0x20339c,_0x57bf0b);let _0x6fe345=this[_0x53f128(0x1a2)]?this['p'][_0x53f128(0x1a0)](0x0,0xff,_0x1c6799):this['p']['lerp'](0xb7,0xff,_0x1c6799),_0x19eceb=this[_0x53f128(0x1a2)]?this['p'][_0x53f128(0x1a0)](0xe6,0xff,_0x1c6799):this['p'][_0x53f128(0x1a0)](0x1c,0xff,_0x1c6799),_0x2c0c39=this[_0x53f128(0x1a2)]?this['p'][_0x53f128(0x1a0)](0x76,0xff,_0x1c6799):this['p']['lerp'](0x1c,0xff,_0x1c6799);this['p'][_0x53f128(0x187)](_0x6fe345,_0x19eceb,_0x2c0c39,0xb4+_0x1c6799*0x4b);let _0x1221a9=this['p'][_0x53f128(0x1a0)](0x2,_0x3f5b9c,_0x1b7eb2),_0x5c9a99=_0x1221a9+_0x1c6799*_0x3f5b9c*1.2;this['p']['rect'](this['x'],this['y'],_0x5c9a99,_0x5c9a99);}else{if(this['mode']===_0x53f128(0x165)){if(_0x4c4011>=this['activationProgress'])this[_0x53f128(0x18c)]=!![];if(!this['active']){this['p'][_0x53f128(0x187)](this[_0x53f128(0x1a2)]?[0x0,0xe6,0x76]:[0xb7,0x1c,0x1c]),this['p']['rect'](this['x'],this['y'],_0x3f5b9c,_0x3f5b9c);return;}let _0x486865=_0x1c6799*0xf,_0x4f6121=0.005,_0x3882a3=this['p'][_0x53f128(0x172)](this['x']*_0x4f6121,this['y']*_0x4f6121,globalNoiseTime)*this['p']['TWO_PI']*0x4;this['vx']+=this['p'][_0x53f128(0x150)](_0x3882a3)*(0.5+_0x486865),this['vy']+=this['p'][_0x53f128(0x1b1)](_0x3882a3)*(0.5+_0x486865),this['vx']*=0.9,this['vy']*=0.9,this['x']+=this['vx'],this['y']+=this['vy'],this[_0x53f128(0x140)]-=0x3;if(this[_0x53f128(0x140)]>0x0){let _0x303bd8=this[_0x53f128(0x1a2)]?this['p']['lerp'](0x0,0xff,_0x1c6799):this['p']['lerp'](0xb7,0xff,_0x1c6799),_0x1439cd=this['isData']?this['p']['lerp'](0xe6,0xff,_0x1c6799):this['p'][_0x53f128(0x1a0)](0x1c,0xff,_0x1c6799),_0x5ba659=this[_0x53f128(0x1a2)]?this['p'][_0x53f128(0x1a0)](0x76,0xff,_0x1c6799):this['p'][_0x53f128(0x1a0)](0x1c,0xff,_0x1c6799);this['p'][_0x53f128(0x187)](_0x303bd8,_0x1439cd,_0x5ba659,this[_0x53f128(0x140)]+_0x1c6799*0x4b);let _0x2e0d49=_0x3f5b9c+_0x1c6799*_0x3f5b9c*2.5;this['p'][_0x53f128(0x1ae)](this['x'],this['y'],_0x2e0d49,_0x2e0d49);}}}}}myP5=new p5(_0xcbf68f=>{const _0x2dcfb8=_0x269545;_0xcbf68f[_0x2dcfb8(0x1ac)]=()=>{const _0x2a30a0=_0x2dcfb8;let _0x4d1853=_0xcbf68f[_0x2a30a0(0x1b0)](0x258,0x258);_0x4d1853[_0x2a30a0(0x173)](_0x2a30a0(0x1d7)),_0xcbf68f[_0x2a30a0(0x1cc)](),_0xcbf68f[_0x2a30a0(0x189)](_0xcbf68f[_0x2a30a0(0x1ca)]),_0xcbf68f[_0x2a30a0(0x1c8)](_0xcbf68f[_0x2a30a0(0x1ca)],_0xcbf68f[_0x2a30a0(0x1ca)]);},_0xcbf68f[_0x2dcfb8(0x1e2)]=()=>{const _0x52c312=_0x2dcfb8;globalBeatPulse*=0.7,globalNoiseTime+=0.005+globalBeatPulse*0.08;let _0x441a39=0x5+globalBeatPulse*0x19;_0xcbf68f['background'](_0x441a39,_0x441a39,_0x441a39,0x5a);let _0x1c3557=_0xcbf68f['width']/qrSize;if(globalMode===_0x52c312(0x145)||globalMode===_0x52c312(0x165)||globalMode===_0x52c312(0x1a8)){let _0x5b90c6=globalMode===_0x52c312(0x1a8)&&globalMode!==_0x52c312(0x165);for(let _0x4646ae of particles){_0x4646ae[_0x52c312(0x170)](globalProgress,_0x1c3557,_0x5b90c6,globalBeatPulse);}if((globalMode===_0x52c312(0x165)||globalMode===_0x52c312(0x1a8))&&isAudioInit){let _0x4db05d=meter[_0x52c312(0x1cf)]();if(!isFinite(_0x4db05d))_0x4db05d=-0x64;let _0x2fe8de=_0xcbf68f[_0x52c312(0x19b)](_0x4db05d,-0x1e,-0x5,0x0,0xff,!![]);if(globalMode==='done')_0x2fe8de=0xff;if(globalMode!==_0x52c312(0x1a8)){_0xcbf68f[_0x52c312(0x1cd)]();let _0x5c6cb2=_0xcbf68f[_0x52c312(0x19b)](_0x4db05d,-0x28,0x0,0x64,_0xcbf68f[_0x52c312(0x148)]*0.8,!![]);_0xcbf68f[_0x52c312(0x163)](0x0,0xe6,0x76,_0x2fe8de*0.5),_0xcbf68f[_0x52c312(0x197)](0x2+globalBeatPulse*0xf),_0xcbf68f[_0x52c312(0x14d)](_0xcbf68f[_0x52c312(0x148)]/0x2,_0xcbf68f[_0x52c312(0x1e4)]/0x2,_0x5c6cb2),_0xcbf68f[_0x52c312(0x1cc)]();}let _0x1f6a22=Math[_0x52c312(0x1b3)](decryptedMessage[_0x52c312(0x17c)]*globalProgress);if(globalMode===_0x52c312(0x1a8))_0x1f6a22=decryptedMessage[_0x52c312(0x17c)];let _0x104a29=decryptedMessage[_0x52c312(0x176)](0x0,_0x1f6a22),_0x2db599='';if(globalMode!==_0x52c312(0x1a8)&&_0x1f6a22<decryptedMessage[_0x52c312(0x17c)]){const _0x3de909=_0x52c312(0x18f);let _0x476664=Math[_0x52c312(0x13d)](0x3,decryptedMessage[_0x52c312(0x17c)]-_0x1f6a22);for(let _0x399f0d=0x0;_0x399f0d<_0x476664;_0x399f0d++){_0x2db599+=_0x3de909[Math['floor'](Math[_0x52c312(0x188)]()*_0x3de909[_0x52c312(0x17c)])];}}let _0x2cf922=_0x104a29+_0x2db599;_0xcbf68f['textSize'](0x20),_0xcbf68f[_0x52c312(0x143)](_0xcbf68f[_0x52c312(0x1b2)]),_0x2cf922[_0x52c312(0x17c)]>0x0&&(_0xcbf68f['fill'](0x0,0x0,0x0,_0x2fe8de*0.85),_0xcbf68f[_0x52c312(0x1ae)](_0xcbf68f['width']/0x2,_0xcbf68f['height']/0x2,_0xcbf68f[_0x52c312(0x148)]*0.85,_0xcbf68f[_0x52c312(0x1e4)]*0.85)),globalBeatPulse>0.6&&globalMode!==_0x52c312(0x1a8)&&(_0xcbf68f[_0x52c312(0x187)](0xff,0x0,0x0,_0x2fe8de*0.8),_0xcbf68f['text'](_0x2cf922,_0xcbf68f[_0x52c312(0x148)]/0x2-0x4,_0xcbf68f[_0x52c312(0x1e4)]/0x2,_0xcbf68f[_0x52c312(0x148)]*0.8,_0xcbf68f['height']*0.8),_0xcbf68f[_0x52c312(0x187)](0x0,0x64,0xff,_0x2fe8de*0.8),_0xcbf68f[_0x52c312(0x1bc)](_0x2cf922,_0xcbf68f[_0x52c312(0x148)]/0x2+0x4,_0xcbf68f[_0x52c312(0x1e4)]/0x2,_0xcbf68f[_0x52c312(0x148)]*0.8,_0xcbf68f['height']*0.8)),_0xcbf68f[_0x52c312(0x187)](0x0,0xe6,0x76,_0x2fe8de),_0xcbf68f[_0x52c312(0x1bc)](_0x2cf922,_0xcbf68f[_0x52c312(0x148)]/0x2,_0xcbf68f[_0x52c312(0x1e4)]/0x2,_0xcbf68f['width']*0.8,_0xcbf68f[_0x52c312(0x1e4)]*0.8);}}else _0xcbf68f[_0x52c312(0x1cd)](),_0xcbf68f[_0x52c312(0x163)](0x0,0xe6,0x76,0x32),_0xcbf68f[_0x52c312(0x197)](0x1),_0xcbf68f[_0x52c312(0x14d)](_0xcbf68f[_0x52c312(0x148)]/0x2,_0xcbf68f[_0x52c312(0x1e4)]/0x2,_0xcbf68f[_0x52c312(0x1b1)](_0xcbf68f[_0x52c312(0x14e)]*0.05)*0x32+0x96),_0xcbf68f[_0x52c312(0x187)](0x0,0xe6,0x76,0x14),_0xcbf68f[_0x52c312(0x1cc)](),_0xcbf68f[_0x52c312(0x14d)](_0xcbf68f[_0x52c312(0x148)]/0x2,_0xcbf68f[_0x52c312(0x1e4)]/0x2,0x14);};});function prepareConstructLogic(){const _0xc46d61=_0x269545,_0x33828d=document[_0xc46d61(0x19f)](_0xc46d61(0x14f))[_0xc46d61(0x1b4)],_0x4c8eac=document[_0xc46d61(0x19f)](_0xc46d61(0x1b9))[_0xc46d61(0x1b4)],_0x362bd4=CryptoJS[_0xc46d61(0x1d8)]['encrypt'](_0x33828d,masterAudioKey)['toString'](),_0x2874e8={'v':_0xc46d61(0x1c1),'k':_0x4c8eac,'p':_0x362bd4},_0x3a944a=btoa(JSON['stringify'](_0x2874e8));pendingSlayyBlob=new Blob([_0x3a944a],{'type':_0xc46d61(0x16c)}),pendingSlayyFilename=_0xc46d61(0x1bf)+masterAudioKey[_0xc46d61(0x176)](0x0,0x6)+_0xc46d61(0x18a);let _0x20525c=''+window['location'][_0xc46d61(0x18d)]+window['location']['pathname']+_0xc46d61(0x1df)+encodeURIComponent(_0x362bd4)+_0xc46d61(0x141)+_0x4c8eac;targetQR=qrcode(0x0,'M'),targetQR[_0xc46d61(0x1ce)](_0x20525c),targetQR['make'](),qrSize=targetQR['getModuleCount'](),buildParticleArray(_0xc46d61(0x145));}document[_0x269545(0x19f)](_0x269545(0x1dc))[_0x269545(0x1de)]('click',()=>{const _0x7b3012=_0x269545;if(!pendingSlayyBlob)return;const _0x1ce057=document[_0x7b3012(0x1ba)]('a');_0x1ce057[_0x7b3012(0x1db)]=URL[_0x7b3012(0x155)](pendingSlayyBlob),_0x1ce057[_0x7b3012(0x199)]=pendingSlayyFilename,_0x1ce057[_0x7b3012(0x1e3)]();});const dropArea=document[_0x269545(0x19f)]('dropArea'),fileInput=document[_0x269545(0x19f)](_0x269545(0x161));dropArea[_0x269545(0x1de)]('click',()=>fileInput[_0x269545(0x1e3)]()),dropArea[_0x269545(0x1de)](_0x269545(0x198),_0x42cf47=>{const _0x48bc09=_0x269545;_0x42cf47[_0x48bc09(0x1ad)](),dropArea['style'][_0x48bc09(0x1a7)]=_0x48bc09(0x19e);}),dropArea[_0x269545(0x1de)](_0x269545(0x1d4),()=>{const _0x197164=_0x269545;dropArea[_0x197164(0x194)]['borderColor']=_0x197164(0x1d6);}),dropArea[_0x269545(0x1de)](_0x269545(0x1c3),_0x540a4a=>{const _0x42583e=_0x269545;_0x540a4a[_0x42583e(0x1ad)](),dropArea[_0x42583e(0x194)][_0x42583e(0x1a7)]=_0x42583e(0x1d6),handleFile(_0x540a4a['dataTransfer'][_0x42583e(0x15f)][0x0]);}),fileInput[_0x269545(0x1de)](_0x269545(0x154),_0x2bb6bc=>handleFile(_0x2bb6bc[_0x269545(0x159)][_0x269545(0x15f)][0x0]));function handleFile(_0x16c891){const _0x2d6b02=_0x269545;if(!_0x16c891)return;if(_0x16c891[_0x2d6b02(0x15c)]['toLowerCase']()[_0x2d6b02(0x19d)](_0x2d6b02(0x18a))){const _0x741de8=new FileReader();_0x741de8[_0x2d6b02(0x15d)]=_0x213816=>{const _0x4ddae0=_0x2d6b02;try{const _0x355003=atob(_0x213816[_0x4ddae0(0x159)][_0x4ddae0(0x19c)]),_0x519e4e=JSON[_0x4ddae0(0x192)](_0x355003);if(_0x519e4e['v']===_0x4ddae0(0x1c1)&&_0x519e4e['p']&&_0x519e4e['k'])incomingPayload=_0x519e4e['p'],document[_0x4ddae0(0x19f)](_0x4ddae0(0x1a4))[_0x4ddae0(0x193)][_0x4ddae0(0x1b7)](_0x4ddae0(0x151)),document[_0x4ddae0(0x19f)](_0x4ddae0(0x14c))['classList'][_0x4ddae0(0x175)](_0x4ddae0(0x151)),document[_0x4ddae0(0x19f)]('encryptButton')[_0x4ddae0(0x193)][_0x4ddae0(0x1b7)](_0x4ddae0(0x151)),document['getElementById'](_0x4ddae0(0x1e5))['classList'][_0x4ddae0(0x175)](_0x4ddae0(0x151)),document[_0x4ddae0(0x19f)](_0x4ddae0(0x1dc))[_0x4ddae0(0x193)][_0x4ddae0(0x1b7)]('hidden'),document[_0x4ddae0(0x19f)]('status')[_0x4ddae0(0x1d3)]=_0x4ddae0(0x1bb),document['getElementById'](_0x4ddae0(0x1d9))['classList'][_0x4ddae0(0x168)](_0x4ddae0(0x195),_0x4ddae0(0x18e)),document['getElementById'](_0x4ddae0(0x13b))['innerText']=_0x4ddae0(0x1bd),document[_0x4ddae0(0x19f)](_0x4ddae0(0x1b9))[_0x4ddae0(0x1b4)]=_0x519e4e['k'],document[_0x4ddae0(0x19f)](_0x4ddae0(0x1b9))[_0x4ddae0(0x1a3)](new Event(_0x4ddae0(0x154)));else throw new Error('Invalid\x20Version');}catch(_0x3b368b){alert(_0x4ddae0(0x1e9));}},_0x741de8[_0x2d6b02(0x160)](_0x16c891);}}function prepareRevealLogic(){const _0x50f7f1=_0x269545;try{const _0x497ccc=CryptoJS['AES'][_0x50f7f1(0x1c2)](incomingPayload,masterAudioKey);decryptedMessage=_0x497ccc[_0x50f7f1(0x1d1)](CryptoJS[_0x50f7f1(0x153)][_0x50f7f1(0x183)]);if(!decryptedMessage)throw new Error(_0x50f7f1(0x16f));}catch(_0x1b60c0){return alert(_0x50f7f1(0x1e1)),![];}let _0x4aade7=_0x50f7f1(0x180)+window[_0x50f7f1(0x191)]['host']+_0x50f7f1(0x16a)+encodeURIComponent(incomingPayload)+_0x50f7f1(0x141)+document[_0x50f7f1(0x19f)]('songNumber')[_0x50f7f1(0x1b4)];return targetQR=qrcode(0x0,'M'),targetQR[_0x50f7f1(0x1ce)](_0x4aade7),targetQR[_0x50f7f1(0x16b)](),qrSize=targetQR[_0x50f7f1(0x166)](),buildParticleArray(_0x50f7f1(0x165)),!![];}function buildParticleArray(_0x2b7873){const _0x48a342=_0x269545;particles=[];const _0x4144eb=new Midi(currentMidiBuffer),_0x49acb1=_0x4144eb[_0x48a342(0x1dd)],_0x3d5044=[];_0x4144eb[_0x48a342(0x147)][_0x48a342(0x1c7)](_0x3b4bca=>_0x3b4bca[_0x48a342(0x1b5)][_0x48a342(0x1c7)](_0xc6c045=>_0x3d5044[_0x48a342(0x186)](_0xc6c045)));for(let _0x4ea4e1=0x0;_0x4ea4e1<qrSize;_0x4ea4e1++){for(let _0x2e0f72=0x0;_0x2e0f72<qrSize;_0x2e0f72++){let _0x51f1b1=targetQR['isDark'](_0x4ea4e1,_0x2e0f72),_0x4819a8=_0x3d5044[Math[_0x48a342(0x1b3)](Math[_0x48a342(0x188)]()*_0x3d5044['length'])],_0x964d67=_0x2b7873===_0x48a342(0x145)?0.7:0.9,_0x1f49fb=_0x4819a8[_0x48a342(0x1eb)]/_0x49acb1*_0x964d67;particles[_0x48a342(0x186)](new DataParticle(myP5,_0x4ea4e1,_0x2e0f72,_0x51f1b1,_0x1f49fb,_0x4819a8['velocity'],_0x2b7873));}}}document[_0x269545(0x19f)](_0x269545(0x1cb))[_0x269545(0x1de)](_0x269545(0x1e3),async()=>{const _0x3596e6=_0x269545;if(!document[_0x3596e6(0x19f)](_0x3596e6(0x14f))['value'])return alert(_0x3596e6(0x169));await initAudio(),prepareConstructLogic(),Tone[_0x3596e6(0x14b)]['lookAhead']=0.1,playAudioSequence('construct');}),document[_0x269545(0x19f)](_0x269545(0x1e5))['addEventListener'](_0x269545(0x1e3),async()=>{const _0x3cc228=_0x269545;if(!prepareRevealLogic())return;await initAudio(),document[_0x3cc228(0x19f)](_0x3cc228(0x1d9))[_0x3cc228(0x1d3)]=_0x3cc228(0x17d),document[_0x3cc228(0x19f)](_0x3cc228(0x1e5))[_0x3cc228(0x193)][_0x3cc228(0x1b7)](_0x3cc228(0x151)),Tone['context']['lookAhead']=0.1,playAudioSequence('reveal');});function playAudioSequence(_0x3f082a){const _0xdd2551=_0x269545;if(!currentMidiBuffer)return;const _0x35ed7e=new Midi(currentMidiBuffer),_0x37f14b=_0x35ed7e[_0xdd2551(0x1dd)];globalMode=_0x3f082a,globalProgress=0x0,_0x3f082a===_0xdd2551(0x145)&&(document[_0xdd2551(0x19f)](_0xdd2551(0x1cb))[_0xdd2551(0x1da)]=!![],document[_0xdd2551(0x19f)](_0xdd2551(0x1dc))['classList'][_0xdd2551(0x1b7)](_0xdd2551(0x151))),_0x35ed7e[_0xdd2551(0x147)][_0xdd2551(0x1c7)](_0x1a436a=>{const _0x83871f=_0xdd2551;let _0x5ae04c=_0x1a436a[_0x83871f(0x1c6)]===0x9;_0x1a436a[_0x83871f(0x1b5)][_0x83871f(0x1c7)](_0x508747=>{const _0x24b7ca=_0x83871f;Tone[_0x24b7ca(0x17f)][_0x24b7ca(0x156)](_0x2545cb=>{const _0x1a1ce9=_0x24b7ca;synth[_0x1a1ce9(0x1d2)](_0x508747['name'],_0x508747[_0x1a1ce9(0x1dd)],_0x2545cb);let _0x4c457c=_0x508747[_0x1a1ce9(0x1c4)]<0x2d;Tone[_0x1a1ce9(0x1d5)][_0x1a1ce9(0x156)](()=>{const _0x9994fc=_0x1a1ce9;if((_0x5ae04c||_0x4c457c)&&_0x508747[_0x9994fc(0x1a5)]>0.6)globalBeatPulse=0x1;else _0x508747[_0x9994fc(0x1a5)]>0.8&&(globalBeatPulse=Math[_0x9994fc(0x146)](globalBeatPulse,0.3));},_0x2545cb);},_0x508747[_0x24b7ca(0x1eb)]);});}),Tone[_0xdd2551(0x17f)][_0xdd2551(0x19a)](),syncInterval=setInterval(()=>{const _0x4f1a62=_0xdd2551;globalProgress=Math[_0x4f1a62(0x13d)](Tone[_0x4f1a62(0x17f)]['seconds']/_0x37f14b,0x1),globalProgress>=0x1&&(clearInterval(syncInterval),Tone[_0x4f1a62(0x17f)]['stop'](),globalMode=_0x4f1a62(0x1a8),_0x3f082a===_0x4f1a62(0x145)?(document[_0x4f1a62(0x19f)](_0x4f1a62(0x1d9))[_0x4f1a62(0x1d3)]=_0x4f1a62(0x179),document[_0x4f1a62(0x19f)](_0x4f1a62(0x1cb))['classList'][_0x4f1a62(0x1b7)](_0x4f1a62(0x151)),document[_0x4f1a62(0x19f)](_0x4f1a62(0x1dc))[_0x4f1a62(0x193)][_0x4f1a62(0x175)]('hidden')):(document[_0x4f1a62(0x19f)](_0x4f1a62(0x1d9))[_0x4f1a62(0x1d3)]=_0x4f1a62(0x1c9),document[_0x4f1a62(0x19f)](_0x4f1a62(0x13f))[_0x4f1a62(0x1b4)]=decryptedMessage));},0x1e);}function _0x34c5(_0x4c6f3a,_0x47102d){_0x4c6f3a=_0x4c6f3a-0x13b;const _0x18221d=_0x1822();let _0x34c590=_0x18221d[_0x4c6f3a];return _0x34c590;}document[_0x269545(0x19f)](_0x269545(0x1b9))[_0x269545(0x1de)](_0x269545(0x154),async function(){const _0x3b7076=_0x269545;if(!this[_0x3b7076(0x1b4)])return;document['getElementById'](_0x3b7076(0x1d9))[_0x3b7076(0x1d3)]=_0x3b7076(0x1d0);const _0xe53f30=await fetch(midiFiles[parseInt(this[_0x3b7076(0x1b4)])-0x1]);currentMidiBuffer=await _0xe53f30[_0x3b7076(0x1be)]();let _0x3df33e='';new Midi(currentMidiBuffer)[_0x3b7076(0x147)][_0x3b7076(0x1c7)](_0x4e455e=>_0x4e455e[_0x3b7076(0x1b5)][_0x3b7076(0x1c7)](_0x55c9f6=>_0x3df33e+=_0x55c9f6[_0x3b7076(0x1c4)]+'.'+_0x55c9f6[_0x3b7076(0x1dd)]+'|')),masterAudioKey=CryptoJS['SHA512'](_0x3df33e)[_0x3b7076(0x1d1)]();let _0xe430b0=masterAudioKey['substring'](0x0,0x8);document['getElementById'](_0x3b7076(0x1af))['innerText']=_0x3b7076(0x1e7)+_0xe430b0,document[_0x3b7076(0x19f)](_0x3b7076(0x1d9))[_0x3b7076(0x1d3)]=_0x3b7076(0x1e8),document[_0x3b7076(0x19f)]('encryptButton')[_0x3b7076(0x1da)]=![];});</body>
</html>
