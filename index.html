<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Audio Cipher: Gas-Lighting Protocol (Scan-to-Reveal Engine)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; min-height: 100vh; background: #050505; display: flex; justify-content: center; align-items: center; flex-direction: column; color: #e5e5e5; font-family: 'Courier New', Courier, monospace; overflow-x: hidden; }
        #gameboard { margin: 20px 0; width: 95vw; max-width: 600px; aspect-ratio: 1; background-color: #000; border: 2px solid #222; position: relative; box-shadow: 0 0 20px rgba(0, 230, 118, 0.1); display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #typingInput, #decryptedOutput { background-color: #0a0a0a; color: #00e676; border: 1px solid #333; padding: 1rem; width: 100%; font-family: 'Courier New', monospace; transition: border-color 0.3s; }
        #typingInput:focus { border-color: #00e676; outline: none; }
        .btn-custom { border: 1px solid #333; background-color: #151515; color: #aaa; text-transform: uppercase; letter-spacing: 1px; transition: all 0.2s; }
        .btn-custom:hover:not(:disabled) { background-color: #222; color: white; border-color: #555; }
        .btn-custom:disabled { opacity: 0.3; cursor: not-allowed; }
        .hidden { display: none; }
    </style>
</head>
<body class="p-4 relative">

    <div class="w-full max-w-2xl flex flex-col items-center gap-4">
        <h2 class="text-2xl font-bold tracking-widest text-center h-8" id="dynamicHeader">GAS-LIGHTING</h2>
        
        <div id="gameboard"></div>
        
        <div class="w-full flex justify-between items-center text-xs font-mono bg-gray-900 p-2 rounded border border-gray-800">
            <span id="status" class="text-green-500">SYSTEM IDLE</span>
            <span id="wpmDisplay" class="text-gray-500">WPM: 0</span>
        </div>

        <div class="w-full flex flex-col gap-3 bg-gray-900 p-4 rounded border border-gray-800">
            <div id="inputSection"><textarea id="typingInput" rows="2" placeholder="> ENTER_PAYLOAD..."></textarea></div>
            <div id="outputSection" class="hidden"><textarea id="decryptedOutput" rows="2" readonly placeholder="> AWAITING DECRYPTION SEQUENCE..."></textarea></div>
            
            <div id="dropArea" class="w-full h-20 rounded flex flex-col items-center justify-center cursor-pointer relative bg-black border border-dashed border-gray-700 hover:border-green-500 transition-colors">
                <p id="dropText" class="text-gray-500 text-xs text-center">
                    DROP MIDI (KEY) TO LOCK<br>
                    <span class="text-gray-700 text-[10px]">- OR SCAN/DROP QR TO DECRYPT -</span>
                </p>
                <input type="file" id="fileInput" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" accept=".mid,.midi,.slayy,.svg" />
            </div>

            <select id="songNumber" class="w-full bg-black text-white p-2 text-xs border border-gray-700 outline-none">
                <option value="">[ SELECT PRESET KEY ]</option>
                <option value="1">Titanic Theme</option>
                <option value="2">American Pie</option>
                <option value="3">Hypnotize</option>
                <option value="4">Lost In Hollywood</option>
                <option value="5">Holding Out For A Hero</option>
                <option value="6">Severance Theme</option>
                <option value="7">Bury a Friend</option>
                <option value="8">Good Riddance</option>
                <option value="9">Tetris Theme</option>
                <option value="10">Westworld Theme</option>
                <option value="11">Interstellar Theme</option>
                <option value="12">Happy Violence</option>
                <option value="13">Dancing Queen</option>
                <option value="14">Death Note</option>
                <option value="15">Bohemian Rhapsody</option>
                <option value="16">Only Time</option>
            </select>

            <button id="encryptButton" class="btn-custom w-full py-3 mt-2 text-sm font-bold" disabled>CONSTRUCT QR & LINK</button>
            <button id="decryptButton" class="hidden btn-custom w-full py-3 mt-2 text-sm font-bold text-yellow-500 border-yellow-800 animate-pulse">DECRYPT SCANNED SIGNAL</button>
        </div>
        
        <div class="w-full flex gap-2 hidden" id="shareButtons">
            <button id="downloadButton" class="btn-custom flex-1 py-2 text-xs bg-green-900 text-white">DOWNLOAD .SLAYY</button>
        </div>
    </div>

    <script src="https://unpkg.com/tone@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <script>
function _0x2f18(_0x238727,_0x132ae6){_0x238727=_0x238727-0x8d;const _0xae2db=_0xae2d();let _0x2f18af=_0xae2db[_0x238727];return _0x2f18af;}const _0x74be59=_0x2f18;(function(_0x5d72d7,_0x2990b7){const _0x34daa9=_0x2f18,_0x3839f2=_0x5d72d7();while(!![]){try{const _0x6b8d2a=parseInt(_0x34daa9(0xba))/0x1+parseInt(_0x34daa9(0xb3))/0x2+parseInt(_0x34daa9(0x10b))/0x3*(parseInt(_0x34daa9(0x112))/0x4)+-parseInt(_0x34daa9(0xaa))/0x5+parseInt(_0x34daa9(0x98))/0x6+parseInt(_0x34daa9(0xcd))/0x7+parseInt(_0x34daa9(0x126))/0x8*(-parseInt(_0x34daa9(0x9f))/0x9);if(_0x6b8d2a===_0x2990b7)break;else _0x3839f2['push'](_0x3839f2['shift']());}catch(_0x2fe4e2){_0x3839f2['push'](_0x3839f2['shift']());}}}(_0xae2d,0xb3a63));const midiFiles=['https://irp.cdn-website.com/cee417da/audio/My-Heart-Will-Go-On-%28From--Titanic-%29.mid',_0x74be59(0xec),'https://irp.cdn-website.com/cee417da/audio/Hypnotize_%282%29.mid',_0x74be59(0x8f),_0x74be59(0xdb),_0x74be59(0x113),_0x74be59(0xd6),'https://irp.cdn-website.com/cee417da/audio/GoodRiddance%28TimeOfYourLife%29%283%29.mid',_0x74be59(0x11c),'https://irp.cdn-website.com/cee417da/audio/Ramin_Djawadi_-_Westworld_Theme.mid','https://irp.cdn-website.com/cee417da/audio/CornChaseIntersteller.mid',_0x74be59(0x94),'https://irp.cdn-website.com/cee417da/audio/DancingQueen_(1).mid',_0x74be59(0xad),'https://irp.cdn-website.com/cee417da/audio/Bohemian-Rhapsody-1.mid',_0x74be59(0xa4)];let currentMidiBuffer=null,masterAudioKey=null,qrSize=0x1d,targetQR=null,generatedShareLink='',globalProgress=0x0,globalMode=_0x74be59(0xea),syncInterval=null,particles=[],myP5=null,globalBeatPulse=0x0,globalNoiseTime=0x0,incomingPayload=null,decryptedMessage='';function _0xae2d(){const _0x508895=['WPM:\x20','DECRYPTING\x20SIGNAL\x20STREAM...','inputSection','midi','schedule','tracks','arrayBuffer','push','dragleave','href','shareButtons','dataTransfer','triggerAttackRelease','6975759ffCfMf','round','FETCHING\x20KEY...','Synth','max','dropArea','disabled','gameboard','split','https://irp.cdn-website.com/cee417da/audio/Billie_Eilish_-_bury_a_friend_%28WIP%29.mid','notes','innerText','velocity','getElementById','https://irp.cdn-website.com/cee417da/audio/Holding-Out-For-A-Hero-1.mid','textAlign','time','constrain','add','?payload=','isDark','Transport','.slayy','pow','AES','decryptedOutput','endsWith','&key=','decrypt','idle','fill','https://irp.cdn-website.com/cee417da/audio/Don_McLean_-_American_Pie.mid','hidden','seconds','targetR','text','stop','songNumber','name','sin','value','context','dragover','rect','cos','decryptButton','DECRYPTION\x20FAILED.\x20INVALID\x20KEY\x20OR\x20CORRUPTED\x20PAYLOAD.','dropText','drop','lerp','active','activationProgress','addData','change','TWO_PI','random','map','mode','setup','get','CENTER','classList','4106100MeXMyD','KEY\x20','DOMContentLoaded','width','INVALID\x20.SLAYY\x20FILE','SHA512','WORD','4JPjWQN','https://irp.cdn-website.com/cee417da/audio/Severance_theme.mid','status','textWrap','result','files','updateAndDraw','key','channel','outputSection','https://irp.cdn-website.com/cee417da/audio/Tetris_-_A_Theme.mid','targetC','ENTER\x20PAYLOAD','contains','encrypt','addEventListener','noStroke','draw','MESSAGE\x20FULLY\x20DECRYPTED.','QR\x20SIGNAL\x20DETECTED.\x20READY\x20TO\x20DECRYPT.','248vAkzxW','location','min','https://irp.cdn-website.com/cee417da/audio/LostInHollywood.mid','floor','lookAhead','length','substring','https://irp.cdn-website.com/cee417da/audio/Dada_Life_-_Happy_Violence.mid','toString','click','010101^&|!@#$%*()_+~`={}:<>?','3338454ybtySC','atan2','typingInput','SCAN\x20SUCCESSFUL.\x20FETCHING\x20SYMMETRIC\x20KEY...','ellipse','dispatchEvent','getModuleCount','1192122Takimp','start','\x20LOCKED.','textSize','Error:\x20No\x20MIDI\x20notes\x20found.','https://irp.cdn-website.com/cee417da/audio/OnlyTime.mid','height','forEach','toLowerCase','noise','target','1987000OEFBRG','enc','remove','https://irp.cdn-website.com/cee417da/audio/Death_Note_-_L-s_Theme.mid','make','createCanvas','construct','background','search','2852654LUDhQa','border-green-500','done','isData','rectMode','reveal','parent','891468epStTd','duration','encryptButton','ENCRYPTED\x20FILE\x20LOADED.\x20SELECT\x20KEY\x20TO\x20UNLOCK.','match','opacity'];_0xae2d=function(){return _0x508895;};return _0xae2d();}window[_0x74be59(0x121)](_0x74be59(0x10d),()=>{const _0x253f8f=_0x74be59,_0xe0c372=new URLSearchParams(window[_0x253f8f(0x8d)][_0x253f8f(0xb2)]),_0x1e3ab1=_0xe0c372[_0x253f8f(0x108)]('payload'),_0x25bd6a=_0xe0c372['get'](_0x253f8f(0x119));_0x1e3ab1&&_0x25bd6a&&(incomingPayload=decodeURIComponent(_0x1e3ab1),document['getElementById'](_0x253f8f(0xc2))[_0x253f8f(0x10a)][_0x253f8f(0xdf)](_0x253f8f(0xed)),document[_0x253f8f(0xda)](_0x253f8f(0x11b))[_0x253f8f(0x10a)][_0x253f8f(0xac)](_0x253f8f(0xed)),document[_0x253f8f(0xda)](_0x253f8f(0xbc))[_0x253f8f(0x10a)][_0x253f8f(0xdf)]('hidden'),document[_0x253f8f(0xda)](_0x253f8f(0xfa))['classList'][_0x253f8f(0xac)](_0x253f8f(0xed)),document[_0x253f8f(0xda)](_0x253f8f(0xfc))['innerText']=_0x253f8f(0x125),document[_0x253f8f(0xda)](_0x253f8f(0x114))[_0x253f8f(0xd8)]=_0x253f8f(0x9b),document[_0x253f8f(0xda)](_0x253f8f(0xf2))[_0x253f8f(0xf5)]=_0x25bd6a,document[_0x253f8f(0xda)](_0x253f8f(0xf2))[_0x253f8f(0x9d)](new Event(_0x253f8f(0x102))));});class DataParticle{constructor(_0x758432,_0x2e1e39,_0x32be7f,_0x250d2c,_0x57c7e6,_0x31fc9d,_0x2dd5f8){const _0x2b7e0f=_0x74be59;this['p']=_0x758432,this['isData']=_0x250d2c,this[_0x2b7e0f(0x100)]=_0x57c7e6,this[_0x2b7e0f(0x106)]=_0x2dd5f8,this[_0x2b7e0f(0xef)]=_0x2e1e39,this['targetC']=_0x32be7f,this[_0x2b7e0f(0xff)]=![],this['opacity']=0xb4;let _0x1c83b0=_0x758432[_0x2b7e0f(0x10e)]/qrSize,_0x1cb10d=_0x32be7f*_0x1c83b0+_0x1c83b0/0x2,_0x50c104=_0x2e1e39*_0x1c83b0+_0x1c83b0/0x2;if(_0x2dd5f8==='construct'){this['x']=_0x758432[_0x2b7e0f(0x10e)]/0x2,this['y']=_0x758432[_0x2b7e0f(0xa5)]/0x2;let _0x1e768c=_0x758432[_0x2b7e0f(0x104)](_0x758432[_0x2b7e0f(0x103)]),_0x442ecb=_0x758432[_0x2b7e0f(0x105)](_0x31fc9d,0x0,0x1,0x2,0xc);this['vx']=_0x758432[_0x2b7e0f(0xf9)](_0x1e768c)*_0x442ecb,this['vy']=_0x758432[_0x2b7e0f(0xf4)](_0x1e768c)*_0x442ecb;}else{if(_0x2dd5f8==='reveal'){this['x']=_0x1cb10d,this['y']=_0x50c104;let _0x48e882=_0x758432[_0x2b7e0f(0x99)](this['y']-_0x758432[_0x2b7e0f(0xa5)]/0x2,this['x']-_0x758432['width']/0x2)+_0x758432[_0x2b7e0f(0x104)](-0.5,0.5);this['vx']=_0x758432[_0x2b7e0f(0xf9)](_0x48e882),this['vy']=_0x758432['sin'](_0x48e882);}}}[_0x74be59(0x118)](_0x7b1461,_0x316ef7,_0x5a18ed,_0x32e009){const _0x4b44e1=_0x74be59;let _0x83685c=this[_0x4b44e1(0x11d)]*_0x316ef7+_0x316ef7/0x2,_0x5cab4f=this[_0x4b44e1(0xef)]*_0x316ef7+_0x316ef7/0x2;if(this[_0x4b44e1(0x106)]===_0x4b44e1(0xb0)){if(_0x5a18ed){this['p']['fill'](this['isData']?[0x0,0xe6,0x76]:[0xb7,0x1c,0x1c]),this['p'][_0x4b44e1(0xf8)](_0x83685c,_0x5cab4f,_0x316ef7,_0x316ef7);return;}if(_0x7b1461>=this[_0x4b44e1(0x100)])this[_0x4b44e1(0xff)]=!![];if(!this['active'])return;let _0x27669e=this['p'][_0x4b44e1(0xde)](this['p'][_0x4b44e1(0x105)](_0x7b1461,this[_0x4b44e1(0x100)],0.85,0x0,0x1),0x0,0x1),_0x1e13e6=0.005,_0x50db90=this['p'][_0x4b44e1(0xa8)](this['x']*_0x1e13e6,this['y']*_0x1e13e6,globalNoiseTime)*this['p'][_0x4b44e1(0x103)]*0x4,_0x23a026=this['p'][_0x4b44e1(0x99)](_0x5cab4f-this['y'],_0x83685c-this['x']),_0x503572=this['p']['lerp'](_0x50db90,_0x23a026,_0x32e009),_0x5ef0bb=_0x32e009*0x8;this['vx']+=this['p'][_0x4b44e1(0xf9)](_0x503572)*(0.5+_0x5ef0bb),this['vy']+=this['p'][_0x4b44e1(0xf4)](_0x503572)*(0.5+_0x5ef0bb),this['vx']*=0.8,this['vy']*=0.8;let _0x2b8d43=this['p'][_0x4b44e1(0xe4)](_0x27669e,0x3),_0x4febae=this['p'][_0x4b44e1(0xde)](_0x2b8d43+_0x32e009*0.4,0x0,0x1);this['x']=this['p'][_0x4b44e1(0xfe)](this['x']+this['vx'],_0x83685c,_0x4febae),this['y']=this['p'][_0x4b44e1(0xfe)](this['y']+this['vy'],_0x5cab4f,_0x4febae);let _0x3752bc=this[_0x4b44e1(0xb6)]?this['p'][_0x4b44e1(0xfe)](0x0,0xff,_0x32e009):this['p']['lerp'](0xb7,0xff,_0x32e009),_0x5609ae=this[_0x4b44e1(0xb6)]?this['p'][_0x4b44e1(0xfe)](0xe6,0xff,_0x32e009):this['p'][_0x4b44e1(0xfe)](0x1c,0xff,_0x32e009),_0xb7d327=this[_0x4b44e1(0xb6)]?this['p']['lerp'](0x76,0xff,_0x32e009):this['p'][_0x4b44e1(0xfe)](0x1c,0xff,_0x32e009);this['p']['fill'](_0x3752bc,_0x5609ae,_0xb7d327,0xb4+_0x32e009*0x4b);let _0x589375=this['p'][_0x4b44e1(0xfe)](0x2,_0x316ef7,_0x27669e),_0x39c3a6=_0x589375+_0x32e009*_0x316ef7*1.2;this['p'][_0x4b44e1(0xf8)](this['x'],this['y'],_0x39c3a6,_0x39c3a6);}else{if(this[_0x4b44e1(0x106)]===_0x4b44e1(0xb8)){if(_0x7b1461>=this[_0x4b44e1(0x100)])this[_0x4b44e1(0xff)]=!![];if(!this['active']){this['p'][_0x4b44e1(0xeb)](this['isData']?[0x0,0xe6,0x76]:[0xb7,0x1c,0x1c]),this['p'][_0x4b44e1(0xf8)](this['x'],this['y'],_0x316ef7,_0x316ef7);return;}let _0xdf2279=_0x32e009*0xf,_0x481412=0.005,_0x2245cd=this['p'][_0x4b44e1(0xa8)](this['x']*_0x481412,this['y']*_0x481412,globalNoiseTime)*this['p'][_0x4b44e1(0x103)]*0x4;this['vx']+=this['p']['cos'](_0x2245cd)*(0.5+_0xdf2279),this['vy']+=this['p'][_0x4b44e1(0xf4)](_0x2245cd)*(0.5+_0xdf2279),this['vx']*=0.9,this['vy']*=0.9,this['x']+=this['vx'],this['y']+=this['vy'],this[_0x4b44e1(0xbf)]-=0x3;if(this[_0x4b44e1(0xbf)]>0x0){let _0x191140=this[_0x4b44e1(0xb6)]?this['p'][_0x4b44e1(0xfe)](0x0,0xff,_0x32e009):this['p'][_0x4b44e1(0xfe)](0xb7,0xff,_0x32e009),_0x34a1b7=this[_0x4b44e1(0xb6)]?this['p']['lerp'](0xe6,0xff,_0x32e009):this['p']['lerp'](0x1c,0xff,_0x32e009),_0x5b2aa4=this[_0x4b44e1(0xb6)]?this['p'][_0x4b44e1(0xfe)](0x76,0xff,_0x32e009):this['p']['lerp'](0x1c,0xff,_0x32e009);this['p'][_0x4b44e1(0xeb)](_0x191140,_0x34a1b7,_0x5b2aa4,this[_0x4b44e1(0xbf)]+_0x32e009*0x4b);let _0x5b63ef=_0x316ef7+_0x32e009*_0x316ef7*2.5;this['p']['rect'](this['x'],this['y'],_0x5b63ef,_0x5b63ef);}}}}}myP5=new p5(_0x499ec8=>{const _0xcf2cad=_0x74be59;_0x499ec8[_0xcf2cad(0x107)]=()=>{const _0x1df0cf=_0xcf2cad;let _0x3d3dd3=_0x499ec8[_0x1df0cf(0xaf)](0x258,0x258);_0x3d3dd3[_0x1df0cf(0xb9)](_0x1df0cf(0xd4)),_0x499ec8[_0x1df0cf(0x122)](),_0x499ec8[_0x1df0cf(0xb7)](_0x499ec8[_0x1df0cf(0x109)]);},_0x499ec8[_0xcf2cad(0x123)]=()=>{const _0x6818e9=_0xcf2cad;globalBeatPulse*=0.7,globalNoiseTime+=0.005+globalBeatPulse*0.08;let _0xadfb53=0x5+globalBeatPulse*0x19;_0x499ec8[_0x6818e9(0xb1)](_0xadfb53,_0xadfb53,_0xadfb53,0x5a);let _0x23a0de=_0x499ec8[_0x6818e9(0x10e)]/qrSize;if(globalMode===_0x6818e9(0xb0)||globalMode===_0x6818e9(0xb8)||globalMode===_0x6818e9(0xb5)){let _0x2b1751=globalMode===_0x6818e9(0xb5)&&globalMode!==_0x6818e9(0xb8);for(let _0x55d130 of particles){_0x55d130['updateAndDraw'](globalProgress,_0x23a0de,_0x2b1751,globalBeatPulse);}if(globalMode===_0x6818e9(0xb8)||globalMode===_0x6818e9(0xb5)&&document['getElementById']('decryptButton')[_0x6818e9(0x10a)][_0x6818e9(0x11f)](_0x6818e9(0xed))){let _0x537b2d=Math[_0x6818e9(0x90)](decryptedMessage[_0x6818e9(0x92)]*globalProgress);if(globalMode==='done')_0x537b2d=decryptedMessage['length'];let _0x57c344=decryptedMessage[_0x6818e9(0x93)](0x0,_0x537b2d),_0xcc34fc='';if(globalMode!==_0x6818e9(0xb5)&&_0x537b2d<decryptedMessage[_0x6818e9(0x92)]){const _0x5eaa12=_0x6818e9(0x97);let _0x18497e=Math['min'](0x3,decryptedMessage[_0x6818e9(0x92)]-_0x537b2d);for(let _0x591f76=0x0;_0x591f76<_0x18497e;_0x591f76++){_0xcc34fc+=_0x5eaa12[Math[_0x6818e9(0x90)](Math[_0x6818e9(0x104)]()*_0x5eaa12[_0x6818e9(0x92)])];}}let _0x2be9fa=_0x57c344+_0xcc34fc;_0x499ec8[_0x6818e9(0xa2)](0x20),_0x499ec8[_0x6818e9(0xdc)](_0x499ec8[_0x6818e9(0x109)],_0x499ec8[_0x6818e9(0x109)]),_0x499ec8[_0x6818e9(0x115)](_0x499ec8[_0x6818e9(0x111)]),globalBeatPulse>0.6&&globalMode!==_0x6818e9(0xb5)&&(_0x499ec8[_0x6818e9(0xeb)](0xff,0x0,0x0,0xc8),_0x499ec8[_0x6818e9(0xf0)](_0x2be9fa,_0x499ec8[_0x6818e9(0x10e)]*0.1-0x3,_0x499ec8[_0x6818e9(0xa5)]*0.1,_0x499ec8['width']*0.8,_0x499ec8[_0x6818e9(0xa5)]*0.8),_0x499ec8[_0x6818e9(0xeb)](0x0,0x64,0xff,0xc8),_0x499ec8[_0x6818e9(0xf0)](_0x2be9fa,_0x499ec8[_0x6818e9(0x10e)]*0.1+0x3,_0x499ec8[_0x6818e9(0xa5)]*0.1,_0x499ec8[_0x6818e9(0x10e)]*0.8,_0x499ec8['height']*0.8)),_0x499ec8[_0x6818e9(0xeb)](0x0,0xe6,0x76),_0x499ec8['text'](_0x2be9fa,_0x499ec8[_0x6818e9(0x10e)]*0.1,_0x499ec8[_0x6818e9(0xa5)]*0.1,_0x499ec8[_0x6818e9(0x10e)]*0.8,_0x499ec8['height']*0.8);}}else _0x499ec8[_0x6818e9(0xeb)](0x0,0x32,0x0),_0x499ec8[_0x6818e9(0x9c)](_0x499ec8[_0x6818e9(0x10e)]/0x2,_0x499ec8['height']/0x2,_0x499ec8[_0x6818e9(0xf4)](_0x499ec8['frameCount']*0.05)*0x32+0x64);};});function prepareConstructLogic(){const _0x133609=_0x74be59,_0x10c45a=document['getElementById'](_0x133609(0x9a))[_0x133609(0xf5)],_0xa90e57=CryptoJS[_0x133609(0xe5)][_0x133609(0x120)](_0x10c45a,masterAudioKey)['toString']();generatedShareLink=window[_0x133609(0x8d)][_0x133609(0xc9)][_0x133609(0xd5)]('?')[0x0]+_0x133609(0xe0)+encodeURIComponent(_0xa90e57)+_0x133609(0xe8)+document[_0x133609(0xda)](_0x133609(0xf2))[_0x133609(0xf5)],targetQR=qrcode(0x0,'M'),targetQR[_0x133609(0x101)](generatedShareLink),targetQR[_0x133609(0xae)](),qrSize=targetQR[_0x133609(0x9e)](),buildParticleArray('construct');}function prepareRevealLogic(){const _0x11bb0b=_0x74be59;try{const _0x3094dc=CryptoJS['AES'][_0x11bb0b(0xe9)](incomingPayload,masterAudioKey);decryptedMessage=_0x3094dc[_0x11bb0b(0x95)](CryptoJS[_0x11bb0b(0xab)]['Utf8']);if(!decryptedMessage)throw new Error('Empty\x20Payload');}catch(_0x5e4e8a){return alert(_0x11bb0b(0xfb)),![];}let _0x5a84ca=window[_0x11bb0b(0x8d)][_0x11bb0b(0xc9)][_0x11bb0b(0xd5)]('?')[0x0]+'?payload='+encodeURIComponent(incomingPayload)+_0x11bb0b(0xe8)+document['getElementById'](_0x11bb0b(0xf2))[_0x11bb0b(0xf5)];return targetQR=qrcode(0x0,'M'),targetQR[_0x11bb0b(0x101)](_0x5a84ca),targetQR[_0x11bb0b(0xae)](),qrSize=targetQR['getModuleCount'](),buildParticleArray('reveal'),!![];}function buildParticleArray(_0x27b50a){const _0x2dad59=_0x74be59;particles=[];const _0x594fd5=new Midi(currentMidiBuffer),_0x729f84=_0x594fd5[_0x2dad59(0xbb)],_0x445e08=[];_0x594fd5['tracks'][_0x2dad59(0xa6)](_0x4f746e=>_0x4f746e[_0x2dad59(0xd7)]['forEach'](_0x3e43a1=>_0x445e08['push'](_0x3e43a1)));if(_0x445e08['length']===0x0)return alert(_0x2dad59(0xa3));for(let _0x3a0fef=0x0;_0x3a0fef<qrSize;_0x3a0fef++){for(let _0x472679=0x0;_0x472679<qrSize;_0x472679++){let _0x19a337=targetQR[_0x2dad59(0xe1)](_0x3a0fef,_0x472679),_0x24e730=_0x445e08[Math[_0x2dad59(0x90)](Math[_0x2dad59(0x104)]()*_0x445e08['length'])],_0x4e7340=_0x27b50a==='construct'?0.7:0.9,_0x1e6b4c=_0x24e730[_0x2dad59(0xdd)]/_0x729f84*_0x4e7340;particles[_0x2dad59(0xc7)](new DataParticle(myP5,_0x3a0fef,_0x472679,_0x19a337,_0x1e6b4c,_0x24e730['velocity'],_0x27b50a));}}}document[_0x74be59(0xda)](_0x74be59(0xbc))[_0x74be59(0x121)](_0x74be59(0x96),async()=>{const _0x2f533d=_0x74be59;if(!document['getElementById'](_0x2f533d(0x9a))[_0x2f533d(0xf5)])return alert(_0x2f533d(0x11e));prepareConstructLogic(),Tone[_0x2f533d(0xf6)][_0x2f533d(0x91)]=0.1,await Tone[_0x2f533d(0xa0)](),playAudioSequence(_0x2f533d(0xb0));}),document[_0x74be59(0xda)]('decryptButton')[_0x74be59(0x121)]('click',async()=>{const _0x109f1c=_0x74be59;if(!prepareRevealLogic())return;document[_0x109f1c(0xda)](_0x109f1c(0x114))[_0x109f1c(0xd8)]=_0x109f1c(0xc1),Tone['context']['lookAhead']=0.1,await Tone[_0x109f1c(0xa0)](),playAudioSequence(_0x109f1c(0xb8));});function playAudioSequence(_0x215e8b){const _0xda348b=_0x74be59;if(!currentMidiBuffer)return;const _0xe88e36=new Midi(currentMidiBuffer),_0x3d8106=new Tone['PolySynth'](Tone[_0xda348b(0xd0)],{'maxPolyphony':0x20})['toDestination'](),_0x1b0f2d=_0xe88e36[_0xda348b(0xbb)];globalMode=_0x215e8b,globalProgress=0x0;if(_0x215e8b===_0xda348b(0xb0))document[_0xda348b(0xda)](_0xda348b(0xbc))[_0xda348b(0xd3)]=!![];if(_0x215e8b==='reveal')document['getElementById'](_0xda348b(0xfa))[_0xda348b(0xd3)]=!![];_0xe88e36[_0xda348b(0xc5)][_0xda348b(0xa6)](_0x5dd2c8=>{const _0x4577d=_0xda348b;let _0xc9e549=_0x5dd2c8[_0x4577d(0x11a)]===0x9;_0x5dd2c8[_0x4577d(0xd7)][_0x4577d(0xa6)](_0x2548f7=>{const _0x5da951=_0x4577d;Tone['Transport'][_0x5da951(0xc4)](_0x1aeac4=>{const _0x6e8624=_0x5da951;_0x3d8106[_0x6e8624(0xcc)](_0x2548f7[_0x6e8624(0xf3)],_0x2548f7[_0x6e8624(0xbb)],_0x1aeac4);let _0x140b4a=_0x2548f7[_0x6e8624(0xc3)]<0x2d;Tone['Draw'][_0x6e8624(0xc4)](()=>{const _0x2fe06f=_0x6e8624;if((_0xc9e549||_0x140b4a)&&_0x2548f7['velocity']>0.6)globalBeatPulse=0x1;else _0x2548f7[_0x2fe06f(0xd9)]>0.8&&(globalBeatPulse=Math[_0x2fe06f(0xd1)](globalBeatPulse,0.3));},_0x1aeac4);},_0x2548f7[_0x5da951(0xdd)]);});}),Tone[_0xda348b(0xe2)]['start'](),syncInterval=setInterval(()=>{const _0x37907e=_0xda348b;globalProgress=Math[_0x37907e(0x8e)](Tone['Transport'][_0x37907e(0xee)]/_0x1b0f2d,0x1);if(_0x215e8b===_0x37907e(0xb8)){let _0x33398c=Math[_0x37907e(0x90)](decryptedMessage[_0x37907e(0x92)]*globalProgress);document[_0x37907e(0xda)](_0x37907e(0xe6))[_0x37907e(0xf5)]=decryptedMessage[_0x37907e(0x93)](0x0,_0x33398c);}globalProgress>=0x1&&(clearInterval(syncInterval),Tone['Transport'][_0x37907e(0xf1)](),globalMode=_0x37907e(0xb5),_0x215e8b===_0x37907e(0xb0)?(document[_0x37907e(0xda)](_0x37907e(0x114))[_0x37907e(0xd8)]='TRANSMISSION\x20READY.',document[_0x37907e(0xda)](_0x37907e(0xca))['classList']['remove'](_0x37907e(0xed)),document['getElementById'](_0x37907e(0xbc))[_0x37907e(0xd3)]=![]):(document[_0x37907e(0xda)](_0x37907e(0x114))[_0x37907e(0xd8)]=_0x37907e(0x124),document[_0x37907e(0xda)](_0x37907e(0xe6))[_0x37907e(0xf5)]=decryptedMessage,document[_0x37907e(0xda)](_0x37907e(0xfa))[_0x37907e(0xd3)]=![]));},0x1e);}document['getElementById'](_0x74be59(0xf2))[_0x74be59(0x121)](_0x74be59(0x102),async function(){const _0x206b8e=_0x74be59;if(!this[_0x206b8e(0xf5)])return;document[_0x206b8e(0xda)](_0x206b8e(0x114))[_0x206b8e(0xd8)]=_0x206b8e(0xcf);const _0x39c9eb=await fetch(midiFiles[parseInt(this[_0x206b8e(0xf5)])-0x1]);currentMidiBuffer=await _0x39c9eb[_0x206b8e(0xc6)]();let _0x372de6='';new Midi(currentMidiBuffer)[_0x206b8e(0xc5)][_0x206b8e(0xa6)](_0x4939bb=>_0x4939bb['notes']['forEach'](_0x23a4d6=>_0x372de6+=_0x23a4d6[_0x206b8e(0xc3)]+'.'+_0x23a4d6[_0x206b8e(0xbb)]+'|')),masterAudioKey=CryptoJS[_0x206b8e(0x110)](_0x372de6)['toString'](),document[_0x206b8e(0xda)]('status')['innerText']=_0x206b8e(0x10c)+masterAudioKey[_0x206b8e(0x93)](0x0,0x6)+_0x206b8e(0xa1),document['getElementById'](_0x206b8e(0xbc))[_0x206b8e(0xd3)]=![];});const dropArea=document[_0x74be59(0xda)](_0x74be59(0xd2)),fileInput=document[_0x74be59(0xda)]('fileInput');dropArea['addEventListener'](_0x74be59(0x96),()=>fileInput['click']()),dropArea[_0x74be59(0x121)](_0x74be59(0xf7),_0x4b90af=>{const _0x972a69=_0x74be59;_0x4b90af['preventDefault'](),dropArea[_0x972a69(0x10a)][_0x972a69(0xdf)](_0x972a69(0xb4));}),dropArea[_0x74be59(0x121)](_0x74be59(0xc8),()=>{const _0x3ec11c=_0x74be59;dropArea[_0x3ec11c(0x10a)]['remove'](_0x3ec11c(0xb4));}),dropArea['addEventListener'](_0x74be59(0xfd),_0x3a30e8=>{const _0x385b73=_0x74be59;_0x3a30e8['preventDefault'](),handleFile(_0x3a30e8[_0x385b73(0xcb)]['files'][0x0]);}),fileInput[_0x74be59(0x121)](_0x74be59(0x102),_0x48c3fd=>handleFile(_0x48c3fd[_0x74be59(0xa9)][_0x74be59(0x117)][0x0]));function handleFile(_0xef64cd){const _0x5ccbf9=_0x74be59;if(!_0xef64cd)return;if(_0xef64cd[_0x5ccbf9(0xf3)][_0x5ccbf9(0xa7)]()['endsWith'](_0x5ccbf9(0xe3))||_0xef64cd[_0x5ccbf9(0xf3)][_0x5ccbf9(0xa7)]()[_0x5ccbf9(0xe7)]('.svg')){const _0x3617b2=new FileReader();_0x3617b2['onload']=_0x4cf1af=>{const _0x497e37=_0x5ccbf9,_0x48054f=_0x4cf1af[_0x497e37(0xa9)][_0x497e37(0x116)],_0x5f6f8=_0x48054f['match'](/<desc id="slayy-payload">(.*?)<\/desc>/),_0x51289a=_0x48054f[_0x497e37(0xbe)](/<desc id="slayy-key">(.*?)<\/desc>/);_0x5f6f8&&_0x5f6f8[0x1]?(incomingPayload=decodeURIComponent(_0x5f6f8[0x1]),document[_0x497e37(0xda)]('inputSection')[_0x497e37(0x10a)][_0x497e37(0xdf)](_0x497e37(0xed)),document[_0x497e37(0xda)](_0x497e37(0x11b))[_0x497e37(0x10a)][_0x497e37(0xac)]('hidden'),document['getElementById'](_0x497e37(0xbc))[_0x497e37(0x10a)][_0x497e37(0xdf)](_0x497e37(0xed)),document['getElementById']('decryptButton')['classList'][_0x497e37(0xac)](_0x497e37(0xed)),document[_0x497e37(0xda)](_0x497e37(0xfc))[_0x497e37(0xd8)]=_0x497e37(0xbd),_0x51289a&&_0x51289a[0x1]&&(document[_0x497e37(0xda)]('songNumber')[_0x497e37(0xf5)]=_0x51289a[0x1],document['getElementById'](_0x497e37(0xf2))['dispatchEvent'](new Event(_0x497e37(0x102))))):alert(_0x497e37(0x10f));},_0x3617b2['readAsText'](_0xef64cd);}}let typingStartTime;document[_0x74be59(0xda)](_0x74be59(0x9a))[_0x74be59(0x121)]('input',_0x1ba004=>{const _0x31744e=_0x74be59;if(!typingStartTime)typingStartTime=new Date();let _0x1c431f=_0x1ba004[_0x31744e(0xa9)][_0x31744e(0xf5)][_0x31744e(0x92)]/0x5,_0x496e4a=(new Date()-typingStartTime)/0xea60;document['getElementById']('wpmDisplay')['innerText']=_0x31744e(0xc0)+Math[_0x31744e(0xce)](_0x1c431f/Math[_0x31744e(0xd1)](_0x496e4a,0.001));});    </script>
</body>
</html>
